---
title: "Práctica 2"
author: "Jonathan Alexander Sanchez Barrios – 201903022"
output: html_notebook
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(lubridate)
```


## 1). Cargar los datos


```{r}
questions <- read_csv("questions.csv")
answers <- read_csv("answers.csv")
tags <- read_csv("tags.csv")
question_tags <- read_csv("question_tags.csv")

glimpse(questions)
glimpse(answers)
glimpse(tags)
glimpse(question_tags)
```

## 1,1). Left-join

```{r}
questions_with_tags <- questions %>%
  left_join(question_tags, by = c("id" = "question_id")) %>%
  left_join(tags, by = c("tag_id" = "id")) %>%
  mutate(tag_name = replace_na(tag_name, "only-r"))

head(questions_with_tags)
```

## 2). Comparing scores across tags

```{r}
tag_scores <- questions_with_tags %>%
  group_by(tag_name) %>%
  summarize(mean_score = mean(score, na.rm = TRUE)) %>%
  arrange(desc(mean_score))

head(tag_scores, 10)
```

## 3). Finding gaps between questions and answers

```{r}
questions_answers <- questions %>%
  inner_join(answers, by = c("id" = "question_id"),
             suffix = c("_question", "_answer")) %>%
  mutate(
    creation_date_question = ymd_hms(creation_date_question),
    creation_date_answer = ymd_hms(creation_date_answer),
    gap = creation_date_answer - creation_date_question
  )

head(questions_answers)
```

## 4). Joining question and answer counts

```{r}
answer_counts <- answers %>%
  count(question_id, name = "n") %>%
  arrange(desc(n))

question_answer_counts <- questions %>%
  left_join(answer_counts, by = c("id" = "question_id")) %>%
  mutate(n = replace_na(n, 0))

head(question_answer_counts)
```

## 5). Joining questions, answers, and tags

```{r}
questions_tags_answers <- question_tags %>%
  inner_join(question_answer_counts, by = c("question_id" = "id")) %>%
  inner_join(tags, by = c("tag_id" = "id"))

head(questions_tags_answers)
```

## 6. Análisis final 

```{r}
tag_interest <- questions_tags_answers %>%
  group_by(tag_name) %>%
  summarize(
    preguntas = n(),
    respuestas_promedio = mean(n, na.rm = TRUE)
  ) %>%
  arrange(desc(respuestas_promedio))

head(tag_interest, 10)
```

## 7. Visualización – gráfico de los tags más populares

```{r}
library(ggplot2)

ggplot(head(tag_interest, 10), aes(x = reorder(tag_name, respuestas_promedio), y = respuestas_promedio)) +
  geom_col(fill = "steelblue") +
  coord_flip() +
  labs(title = "Top 10 Tags de R con Mayor Promedio de Respuestas",
       x = "Etiqueta (tag)",
       y = "Promedio de respuestas") +
  theme_minimal()
```
### Interpretación de resultados

El gráfico presenta los 10 tags de R que reciben, en promedio, más respuestas en Stack Overflow.
Se nota que “rt” es el tema con mayor participación (alrededor de 12.5 respuestas por pregunta), mientras que “prepend” y “autohotkey” también destacan con cerca de 8 respuestas en promedio.

En general, los temas más comentados están relacionados con automatización, manipulación de datos y buenas prácticas de programación.
Esto sugiere que la comunidad de R muestra gran interés en resolver dudas prácticas y compartir soluciones útiles para el trabajo diario con el lenguaje.

En resumen, los tags con más respuestas reflejan los temas donde la comunidad es más activa y colaborativa, lo que demuestra un alto nivel de participación e intercambio de conocimiento entre los usuarios.
